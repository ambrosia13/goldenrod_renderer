; SPIR-V
; Version: 1.5
; Generator: NVIDIA Slang Compiler; 0
; Bound: 95
; Schema: 0
OpCapability StorageImageReadWithoutFormat
OpCapability StorageImageWriteWithoutFormat
OpCapability Shader
OpMemoryModel Logical GLSL450
OpEntryPoint GLCompute %compute "compute" %entryPointParams_screen_view %entryPointParams_textures_current %entryPointParams_textures_previous %gl_GlobalInvocationID
OpExecutionMode %compute LocalSize 8 8 1

; Debug Information
OpSource Slang 1
OpName %View_std140 "View_std140"                   ; id %23
OpMemberName %View_std140 0 "width"
OpMemberName %View_std140 1 "height"
OpMemberName %View_std140 2 "frameCount"
OpName %entryPointParams_screen_view "entryPointParams.screen.view"     ; id %25
OpName %entryPointParams_textures_previous "entryPointParams.textures.previous"     ; id %73
OpName %sampled "sampled"                                                           ; id %75
OpName %entryPointParams_textures_current "entryPointParams.textures.current"       ; id %84
OpName %compute "compute"                                                           ; id %2

; Annotations
OpDecorate %gl_GlobalInvocationID BuiltIn GlobalInvocationId
OpDecorate %View_std140 Block
OpMemberDecorate %View_std140 0 Offset 0
OpMemberDecorate %View_std140 1 Offset 4
OpMemberDecorate %View_std140 2 Offset 8
OpDecorate %entryPointParams_screen_view Binding 1
OpDecorate %entryPointParams_screen_view DescriptorSet 0
OpDecorate %entryPointParams_textures_previous Binding 1
OpDecorate %entryPointParams_textures_previous DescriptorSet 2
OpDecorate %entryPointParams_textures_current Binding 0
OpDecorate %entryPointParams_textures_current DescriptorSet 2

; Types, variables and constants
%void = OpTypeVoid
%3 = OpTypeFunction %void
%bool = OpTypeBool
%_ptr_Function_bool = OpTypePointer Function %bool
%float = OpTypeFloat 32
%v2float = OpTypeVector %float 2
%uint = OpTypeInt 32 0
%v3uint = OpTypeVector %uint 3
%_ptr_Input_v3uint = OpTypePointer Input %v3uint
%View_std140 = OpTypeStruct %uint %uint %uint       ; Block
%_ptr_Uniform_View_std140 = OpTypePointer Uniform %View_std140
%int = OpTypeInt 32 1
%int_0 = OpConstant %int 0
%_ptr_Uniform_uint = OpTypePointer Uniform %uint
%int_1 = OpConstant %int 1
%true = OpConstantTrue %bool
%float_1 = OpConstant %float 1
%v2uint = OpTypeVector %uint 2
%v2int = OpTypeVector %int 2
%v3int = OpTypeVector %int 3
%70 = OpTypeImage %float 2D 2 0 0 1 Unknown
%_ptr_UniformConstant_70 = OpTypePointer UniformConstant %70
%v4float = OpTypeVector %float 4
%81 = OpTypeImage %float 2D 2 0 0 2 Unknown
%_ptr_UniformConstant_81 = OpTypePointer UniformConstant %81
%gl_GlobalInvocationID = OpVariable %_ptr_Input_v3uint Input    ; BuiltIn GlobalInvocationId
%entryPointParams_screen_view = OpVariable %_ptr_Uniform_View_std140 Uniform    ; Binding 1, DescriptorSet 0
%entryPointParams_textures_previous = OpVariable %_ptr_UniformConstant_70 UniformConstant   ; Binding 1, DescriptorSet 2
%entryPointParams_textures_current = OpVariable %_ptr_UniformConstant_81 UniformConstant    ; Binding 0, DescriptorSet 2
%uint_0 = OpConstant %uint 0

; Function compute
%compute = OpFunction %void None %3
%4 = OpLabel
%7 = OpVariable %_ptr_Function_bool Function
OpSelectionMerge %88 None
OpSwitch %uint_0 %89
%89 = OpLabel
%19 = OpLoad %v3uint %gl_GlobalInvocationID
%22 = OpCompositeExtract %uint %19 0
%29 = OpAccessChain %_ptr_Uniform_uint %entryPointParams_screen_view %int_0
%30 = OpLoad %uint %29
%31 = OpUGreaterThanEqual %bool %22 %30
OpSelectionMerge %14 None
OpBranchConditional %31 %13 %12
%12 = OpLabel
%33 = OpCompositeExtract %uint %19 1
%35 = OpAccessChain %_ptr_Uniform_uint %entryPointParams_screen_view %int_1
%36 = OpLoad %uint %35
%37 = OpUGreaterThanEqual %bool %33 %36
OpStore %7 %37
OpBranch %14
%13 = OpLabel
OpStore %7 %true
OpBranch %14
%14 = OpLabel
%43 = OpLoad %bool %7
OpSelectionMerge %15 None
OpBranchConditional %43 %16 %15
%15 = OpLabel
%45 = OpConvertUToF %float %22
%46 = OpCompositeExtract %uint %19 1
%47 = OpConvertUToF %float %46
%48 = OpCompositeConstruct %v2float %45 %47
%49 = OpLoad %uint %29
%50 = OpConvertUToF %float %49
%51 = OpAccessChain %_ptr_Uniform_uint %entryPointParams_screen_view %int_1
%52 = OpLoad %uint %51
%53 = OpConvertUToF %float %52
%54 = OpCompositeConstruct %v2float %50 %53
%55 = OpFDiv %v2float %48 %54
%59 = OpCompositeExtract %float %55 1
%60 = OpFSub %float %float_1 %59
%94 = OpCompositeInsert %v2float %60 %55 1
%64 = OpVectorShuffle %v2uint %19 %19 0 1
%66 = OpBitcast %v2int %64
%68 = OpCompositeConstruct %v3int %66 %int_0
%69 = OpVectorShuffle %v2int %68 %68 0 1
%71 = OpLoad %70 %entryPointParams_textures_previous
%sampled = OpImageFetch %v4float %71 %69 Lod %int_0
%78 = OpVectorShuffle %v2float %94 %94 0 1
%79 = OpCompositeExtract %float %sampled 2
%80 = OpCompositeConstruct %v4float %78 %79 %float_1
%82 = OpLoad %81 %entryPointParams_textures_current
OpImageWrite %82 %64 %80
OpBranch %88
%16 = OpLabel
OpBranch %88
%88 = OpLabel
OpReturn
OpFunctionEnd
